# 数据迁移
## 功能模块描述

* 目前各业务系统从开发、测试、演练、生产环境，都要在UUM中进行应用、菜单、权限的配置，重复工作繁重，通过sql脚本还存在数据遗漏的风险。特开发数据迁移功能并提供操作界面，方便测试、运维进行UUM数据的迁移。

* 迁移内容(导出)   
  * 迁移的库表包括:UUM_FUNC、UUM_ROLE
  * 迁移内容描述:
        · 指定应用下的所有权限
        · 指定应用下的指定角色权限
  * 文件格式:json

* 迁移内容(导出)  
  * 导入的库表包括 :UUM_FUNC、UUM_ROLE、UUM_ROLE_RIGHT
  * 文件格式:json

## 角色限定
> 可用角色：系统超级管理员；数据迁移操作员
>
> 角色权限描述:
    * 1、数据迁移(菜单)
    * 2、文件上传 && 导入（按钮）
    * 3、文件导出(按钮)：包括全部导出和指定角色导出

## 操作说明
###### 新环境下：逐步操作。
* 配置权限(菜单管理下)
    *  -M_系统管理—M_数据迁移—B_导出—B_文件上传

* 配置角色(角色管理下)
    * 除超级管理员外，配置一个角色，用于权限分配。比如:数据迁移维护人员

* 角色授权

* 用户分配

* 操作流程举例
> 导出

  * 1、  -M_系统管理—M_数据迁移
  * 2、  应用选择
  * 3、  选定:UUM统一用户管理系统
  * 4-1、  分页顶部按钮:导出。结果：导出该应用下的所有权限
  * 4-2、  分页列表条目按钮：导出。结果：导出该应用下的指定角色的权限
> 导入

  * 1、  -M_系统管理—M_数据迁移
  * 2、  应用选择
  * 3、  选定:UUM统一用户管理系统
  * 4、  导入按钮——选择之前导出的json文件，点击弹框中的导入按钮

## 功能要点
  * 当导出应用与导入应用不是同一应用时，导入会报错
  * 在导入数据之前：必须将菜单中所有网关协议配好，不然会在导入的时候报错，通知用户有哪些协议没有配置，导入不成功
